window.ikarusWidgetJs=function(){function c(e){}function h(e){if(IkarusJQuery("#inputVoo__"+e).attr("sellingmode")=="2"){IkarusJQuery("#trVoo__"+e+" td div")}}var e="";var t=function(e,t,n,r,i){console.log(e);IkarusJQuery.ajax({url:e,timeout:12e4,type:"GET",success:function(e){e=e.substring(e.indexOf("{"),e.lastIndexOf("}")+1);if(e){IkarusJQuery("#ida_"+t+"_searchLoader").remove();IkarusJQuery("#volta_"+t+"_searchLoader").remove();tempFlights=JSON.parse(e);console.log("result "+t+":");console.log(tempFlights);IkarusJQuery("#ikarus_widget_tabela-ida").append(S(tempFlights["independentes"][t]["ida"],"ida",t,n,r,i));if(i["trip"]=="R"){IkarusJQuery("#ikarus_widget_tabela-volta").append(S(tempFlights["independentes"][t]["volta"],"volta",t,n,r,i))}}},error:function(e){console.log("Erro ao buscar voos: "+t)}})};var n=function(t){e=t;console.log("assets url: "+e)};var r=function(){IkarusJQuery("#ikarusDataDepartureDate").datepicker({prevText:"Anterior",nextText:"Próximo",numberOfMonths:2,dateFormat:"dd/mm/yy",dayNames:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado","Domingo"],dayNamesMin:["D","S","T","Q","Q","S","S","D"],dayNamesShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb","Dom"],monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],minDate:0,onClose:function(e){if(e)IkarusJQuery("#ikarusDataBackDate").datepicker("option","minDate",e)}});IkarusJQuery("#ikarusDataBackDate").datepicker({prevText:"Anterior",nextText:"Próximo",numberOfMonths:2,dateFormat:"dd/mm/yy",dayNames:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado","Domingo"],dayNamesMin:["D","S","T","Q","Q","S","S","D"],dayNamesShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb","Dom"],monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],minDate:0});IkarusJQuery("#ikarusDataFrom").ikarus_widget_select2();IkarusJQuery("#ikarusDataTo").ikarus_widget_select2()};var s=function(e,t){IkarusJQuery(e).parent().parent().append("<div class='ikarus_widget_validation_error'>"+t+"</div>")};var o=function(e){IkarusJQuery(".ikarus_widget_validation_error").each(function(e,t){IkarusJQuery(t).remove()});var t=true;var n=IkarusJQuery("input[id$='Name']");for(c=0;c<n.length;c++){var r=IkarusJQuery(n[c]).val();if(r.match(/^[A-z0-9àèìòùÀÈÌÒÙáéíóúýÁÉÍÓÚÝâêîôûÂÊÎÔÛãñõÃÑÕäëïöüÿÄËÏÖÜŸçÇ\s]+$/g)==null){s(n[c],"Por favor não usar pontuações ou abreviações no seu nome.");t=false}}var i=IkarusJQuery("input[id$='Birthday']");for(c=0;c<i.length;c++){var o=IkarusJQuery(i[c]).val();var a=IkarusJQuery(i[c]).attr("typePassenger");if(o.match(/^[0-9]{2}\/[0-9]{2}\/[0-9]{4}$/g)==null){s(i[c],"Data inválida.");t=false}else{var f=ikarusWidgetJs.calculateAge(o,e);if(a=="adult"&&f>=12||a=="child"&&(f>=2||f<12)||a=="baby"&&f<2){}else{if(a=="adult"&&f<12)msg="Um passageiro adulto deve possuir mais que 12 anos até a data do(s) voo(s).";if(a=="child"&&(f<2||f>=12))msg="É considerado criança o passageiro entre 2 e 12 anos antes da data do(s) voo(s).";if(a=="baby"&&f>=2)msg="É considerado bebê o passageiro menor que 2 anos antes da data do(s) voo(s).";s(i[c],msg);t=false}}}if(false){var l=IkarusJQuery("input[id$='Ssn']");for(var c=0;c<l.length;c++){var h=IkarusJQuery(l[c]).val();if(h){var p=IkarusJQuery("#"+IkarusJQuery(l[c]).attr("id")+"type").val();if(p=="CPF"){if(!u(h)){s(l[c],"CPF Inválido.");t=false}}}}}return t};var u=function(e){var t;var n;t=0;if(e=="00000000000")return false;for(var r=1;r<=9;r++)t=t+parseInt(e.substring(r-1,r))*(11-r);n=t*10%11;if(n==10||n==11)n=0;if(n!=parseInt(e.substring(9,10)))return false;t=0;for(r=1;r<=10;r++)t=t+parseInt(e.substring(r-1,r))*(12-r);n=t*10%11;if(n==10||n==11)n=0;if(n!=parseInt(e.substring(10,11)))return false;return true};var a=function(e){if(IkarusJQuery("#ikarusDataTrip").val()=="R"){IkarusJQuery("#ikarusDataBackDateDiv").show(500)}else{IkarusJQuery("#ikarusDataBackDateDiv").hide(500)}};var f=function(e,t){var n=e.split("/");if(t["trip"]=="R")dataVoo=t["backDate"].split("/");else dataVoo=t["departureDate"].split("/");var r=new Date(dataVoo[2],dataVoo[1],dataVoo[0],0,0,0);var i=new Date(n[2],n[1],n[0],0,0,0);var s=r-i.getTime();var o=new Date(s);return Math.abs(o.getUTCFullYear()-1970)};var l=function(e){};var p=function(e){IkarusJQuery("#ikarusDataTrip").val(e["trip"]);IkarusJQuery("#ikarusDataFrom").ikarus_widget_select2("val",e["from"]);IkarusJQuery("#ikarusDataTo").ikarus_widget_select2("val",e["to"]);IkarusJQuery("#ikarusDataDepartureDate").val(e["departureDate"]);IkarusJQuery("#ikarusDataBackDate").val(e["backDate"]);IkarusJQuery("#ikarusDataAdults").val(e["adults"]);IkarusJQuery("#ikarusDataChildren").val(e["children"]);IkarusJQuery("#ikarusDataBabies").val(e["babies"])};var d=function(e,t){trs=IkarusJQuery('tr[id*="trVoo__'+e+'__"]');count=trs.length;for(i=0;i<count;i++){trFechar=IkarusJQuery(trs[i]);if(trFechar.attr("id")=="trVoo__"+t)continue;trFechar.prop("checked",false);trFechar.fadeOut("fast");id=IkarusJQuery(trs[i]).attr("id");id=id.split("__");nameId=id[2];for(j=3;j<id.length;j++)nameId+="__"+id[j];b(nameId)}};var v=function(e,t){trs=IkarusJQuery('tr[id*="trVoo__'+e+'__"]');count=trs.length;for(i=0;i<count;i++){trFechar=IkarusJQuery(trs[i]);if(trFechar.attr("id")=="trVoo__"+t)continue;trFechar.prop("checked",false);trFechar.fadeIn("slow");id=IkarusJQuery(trs[i]).attr("id");id=id.split("__");nameId=id[2];for(j=3;j<id.length;j++)nameId+="__"+id[j];b(nameId)}};var m=function(e,t,n){trs=IkarusJQuery('tr[id*="trVoo__'+e+"__"+t+'"]');count=trs.length;for(i=0;i<count;i++){trFechar=IkarusJQuery(trs[i]);if(trFechar.attr("id")=="trVoo__"+n)continue;trFechar.fadeOut("slow");IkarusJQuery("#inputVoo__"+trFechar.attr("id").replace("trVoo__","")).prop("checked",false);id=trFechar.attr("id");id=id.split("__");nameId=id[2];for(j=3;j<id.length;j++)nameId+="__"+id[j];b(nameId)}};var g=function(e,t,n){trs=IkarusJQuery('tr[id*="trVoo__'+e+"__"+t+'"]');count=trs.length;for(i=0;i<count;i++){trFechar=IkarusJQuery(trs[i]);if(trFechar.attr("id")=="trVoo__"+n)continue;trFechar.fadeIn("slow");IkarusJQuery("#inputVoo__"+trFechar.attr("id").replace("trVoo__","")).prop("checked",false);id=trFechar.attr("id");id=id.split("__");nameId=id[2];for(j=3;j<id.length;j++)nameId+="__"+id[j];b(nameId)}};var y=function(e){IkarusJQuery("#btnOpenDetails__"+e).attr("style","display:none;");IkarusJQuery("#trDetails__"+e).fadeIn("slow");IkarusJQuery("#btnCloseDetails__"+e).attr("style","")};var b=function(e){IkarusJQuery("#btnCloseDetails__"+e).attr("style","display:none;");IkarusJQuery("#trDetails__"+e).fadeOut("slow");IkarusJQuery("#btnOpenDetails__"+e).attr("style","")};var w=function(e){time=new Date(parseInt(e)*1e3);hour=time.getHours();min=time.getMinutes();if(hour<10)hour="0"+hour;if(min<10)min="0"+min;time=hour+":"+min;return time};var E=function(e,t){mask=IkarusJQuery(e).val();IkarusJQuery.mask.definitions["r"]="[0-9A-Za-z.-]";if(mask=="CPF")IkarusJQuery("#Passenger"+t+"Ssn").mask("999.999.999-99");else IkarusJQuery("#Passenger"+t+"Ssn").mask("rrrr?rrrrrrrrrrrrrrrr")};var S=function(t,n,r,s,o,u){html="";for(i=0;i<t.length;i++){t[i]["Flight"]["hash"]=r;partida=w(t[i]["Flight"]["departure"]);chegada=w(t[i]["Flight"]["arrival"]);if(!t[i]["Flight"]["price_adults"])valorDinheiroAdt=0;else valorDinheiroAdt=parseFloat(t[i]["Flight"]["price_adults"]);if(!t[i]["Flight"]["price_children"])valorDinheiroCri=0;else valorDinheiroCri=parseFloat(t[i]["Flight"]["price_children"]);if(!t[i]["Flight"]["miles_adults"])valorMilhasAdt=0;else valorMilhasAdt=parseInt(t[i]["Flight"]["miles_adults"]);if(!t[i]["Flight"]["miles_children"])valorMilhasCri=0;else valorMilhasCri=parseInt(t[i]["Flight"]["miles_children"]);if(!t[i]["Flight"]["miles_adults"])valorEmpresaAdt=0;else valorEmpresaAdt=parseFloat(t[i]["Flight"]["miles_adults"])*s[r]["price"]/1e4;if(!t[i]["Flight"]["miles_children"])valorEmpresaCri=0;else valorEmpresaCri=parseFloat(t[i]["Flight"]["miles_children"])*s[r]["price"]/1e4;t[i]["Flight"]["price_adults"]=valorDinheiroAdt;t[i]["Flight"]["price_children"]=valorDinheiroCri;t[i]["Flight"]["miles_adults"]=valorMilhasAdt;t[i]["Flight"]["miles_children"]=valorMilhasCri;t[i]["Flight"]["empresa_adults"]=valorEmpresaAdt;t[i]["Flight"]["empresa_children"]=valorEmpresaCri;if(t[i]["Flight"]["price_adults_combo"])valorComboDinheiroAdt=0;else valorComboDinheiroAdt=parseFloat(t[i]["Flight"]["price_adults_combo"]);if(!t[i]["Flight"]["price_children_combo"])valorComboDinheiroCri=0;else valorComboDinheiroCri=parseFloat(t[i]["Flight"]["price_children_combo"]);if(!t[i]["Flight"]["miles_adults_combo"])valorComboMilhasAdt=0;else valorComboMilhasAdt=parseInt(t[i]["Flight"]["miles_adults_combo"]);if(!t[i]["Flight"]["miles_children_combo"])valorComboMilhasCri=0;else valorComboMilhasCri=parseInt(t[i]["Flight"]["miles_children_combo"]);if(!t[i]["Flight"]["miles_adults_combo"])valorComboEmpresaAdt=0;else valorComboEmpresaAdt=parseFloat(t[i]["Flight"]["miles_adults_combo"])*s[r]["price"]/1e4;if(!t[i]["Flight"]["miles_children_combo"])valorComboEmpresaCri=0;else valorComboEmpresaCri=parseFloat(t[i]["Flight"]["miles_children_combo"])*s[r]["price"]/1e4;t[i]["Flight"]["price_adults_combo"]=valorComboDinheiroAdt;t[i]["Flight"]["price_children_combo"]=valorComboDinheiroCri;t[i]["Flight"]["miles_adults_combo"]=valorComboMilhasAdt;t[i]["Flight"]["miles_children_combo"]=valorComboMilhasCri;t[i]["Flight"]["empresa_adults_combo"]=valorComboEmpresaAdt;t[i]["Flight"]["empresa_children_combo"]=valorComboEmpresaCri;totalDinheiro=parseFloat((valorDinheiroAdt*u["adults"]+valorDinheiroCri*u["children"]).toFixed(2));totalMilhas=parseInt((valorMilhasAdt*u["adults"]+valorMilhasCri*u["children"]).toFixed(0));totalEmpresa=parseFloat((valorEmpresaAdt*u["adults"]+valorEmpresaCri*u["children"]).toFixed(2));totalComboDinheiro=parseFloat((valorComboDinheiroAdt*u["adults"]+valorComboDinheiroCri*u["children"]).toFixed(2));totalComboMilhas=parseInt((valorComboMilhasAdt*u["adults"]+valorComboMilhasCri*u["children"]).toFixed(0));totalComboEmpresa=parseFloat((valorComboEmpresaAdt*u["adults"]+valorComboEmpresaCri*u["children"]).toFixed(2));t[i]["Flight"]["totalDinheiro"]=totalDinheiro;t[i]["Flight"]["totalMilhas"]=totalMilhas;t[i]["Flight"]["totalEmpresa"]=totalEmpresa;t[i]["Flight"]["totalComboDinheiro"]=totalComboDinheiro;t[i]["Flight"]["totalComboMilhas"]=totalComboMilhas;t[i]["Flight"]["totalComboEmpresa"]=totalComboEmpresa;if(valorDinheiroAdt>0)txtDinheiroAdt=ikarusAccounting.formatMoney(valorDinheiroAdt.toFixed(2),"R$ ",2,".",",");else txtDinheiroAdt=" não informado ";if(valorDinheiroCri>0)txtDinheiroCri=ikarusAccounting.formatMoney(valorDinheiroCri.toFixed(2),"R$ ",2,".",",");else txtDinheiroCri=" não informado ";if(valorMilhasAdt>0)txtMilhasAdt=ikarusAccounting.formatMoney(valorMilhasAdt,"",0,".","");else txtMilhasAdt=" não informado ";if(valorMilhasCri>0)txtMilhasCri=ikarusAccounting.formatMoney(valorMilhasCri,"",0,".","");else txtMilhasCri=" não informado ";if(valorEmpresaAdt>0)txtEmpresaAdt=ikarusAccounting.formatMoney(valorEmpresaAdt.toFixed(2),"R$ ",2,".",",");else txtEmpresaAdt=" não informado ";if(valorEmpresaCri>0)txtEmpresaCri=ikarusAccounting.formatMoney(valorEmpresaCri.toFixed(2),"R$ ",2,".",",");else txtEmpresaCri=" não informado ";if(valorComboDinheiroAdt>0)txtComboDinheiroAdt=ikarusAccounting.formatMoney(valorComboDinheiroAdt.toFixed(2),"R$ ",2,".",",");else txtComboDinheiroAdt=" não informado ";if(valorComboDinheiroCri>0)txtComboDinheiroCri=ikarusAccounting.formatMoney(valorComboDinheiroCri.toFixed(2),"R$ ",2,".",",");else txtComboDinheiroCri=" não informado ";if(valorComboMilhasAdt>0)txtComboMilhasAdt=ikarusAccounting.formatMoney(valorComboMilhasAdt,"",0,".","");else txtComboMilhasAdt=" não informado ";if(valorComboMilhasCri>0)txtComboMilhasCri=ikarusAccounting.formatMoney(valorComboMilhasCri,"",0,".","");else txtComboMilhasCri=" não informado ";if(valorComboEmpresaAdt>0)txtComboEmpresaAdt=ikarusAccounting.formatMoney(valorComboEmpresaAdt.toFixed(2),"R$ ",2,".",",");else txtComboEmpresaAdt=" não informado ";if(valorComboEmpresaCri>0)txtComboEmpresaCri=ikarusAccounting.formatMoney(valorComboEmpresaCri.toFixed(2),"R$ ",2,".",",");else txtComboEmpresaCri=" não informado ";taxaembarque=parseFloat(t[i]["Flight"]["pre_fee"])+parseFloat(t[i]["Flight"]["fee_departure"])+parseFloat(t[i]["Flight"]["fee_arrival"]);taxaembarque=ikarusAccounting.formatMoney(taxaembarque.toFixed(2),"R$ ",2,".",",");json_flight=JSON.stringify(t[i]);if(totalEmpresa>0||totalDinheiro>0||totalMilhas>0||totalComboEmpresa>0||totalComboDinheiro>0||totalComboMilhas>0){html+="<tr id='trVoo__"+n+"__"+r+"__"+i+"' hash='"+r+"' selling_mode='"+s[r]["selling_mode"]+"'>";html+="<td>";if(totalEmpresa>0){html+="<input type='checkbox' onchange='javascript:ikarusWidgetJs.buyRules(this, "+JSON.stringify(u)+", "+JSON.stringify(s)+");' ";html+="hash='"+r+"' ";html+="sellingmode='"+s[r]["selling_mode"]+"' ";html+="id='inputVoo__"+n+"__"+r+"__"+i+"' ";html+="name='voos__"+n+"' ";html+="flightDataParadas='"+t[i]["Flight"]["stops"]+"' ";html+="flightDataPartida='"+t[i]["Flight"]["departure"]+"' ";html+="flightDataChegada='"+t[i]["Flight"]["arrival"]+"' ";html+="flightDataAdtCia='"+valorDinheiroAdt+"' ";html+="flightDataCriCia='"+valorDinheiroCri+"' ";html+="flightDataAdtCiaCombo='"+valorComboDinheiroAdt+"' ";html+="flightDataCriCiaCombo='"+valorComboDinheiroCri+"' ";html+="flightDataAdtMil='"+valorMilhasAdt+"' ";html+="flightDataCriMil='"+valorMilhasCri+"' ";html+="flightDataAdtMilCombo='"+valorComboMilhasAdt+"' ";html+="flightDataCriMilCombo='"+valorComboMilhasCri+"' ";html+="flightDataAdtEmp='"+valorEmpresaAdt+"' ";html+="flightDataCriEmp='"+valorEmpresaCri+"' ";html+="flightDataAdtEmpCombo='"+valorComboEmpresaAdt+"' ";html+="flightDataCriEmpCombo='"+valorComboEmpresaCri+"' ";html+="value='"+json_flight+"'/>"}else{html+="<input type='checkbox' onchange='javascript:ikarusWidgetJs.buyRules(this, "+JSON.stringify(u)+");' style='display:none;' ";html+="hash='"+r+"' ";html+="sellingmode='"+s[r]["selling_mode"]+"' ";html+="id='inputVoo__"+n+"__"+r+"__"+i+"' ";html+="name='voos__"+n+"' ";html+="flightDataParadas='"+t[i]["Flight"]["stops"]+"' ";html+="flightDataPartida='"+t[i]["Flight"]["departure"]+"' ";html+="flightDataChegada='"+t[i]["Flight"]["arrival"]+"' ";html+="flightDataAdtCia='"+valorDinheiroAdt+"' ";html+="flightDataCriCia='"+valorDinheiroCri+"' ";html+="flightDataAdtCiaCombo='"+valorComboDinheiroAdt+"' ";html+="flightDataCriCiaCombo='"+valorComboDinheiroCri+"' ";html+="flightDataAdtMil='"+valorMilhasAdt+"' ";html+="flightDataCriMil='"+valorMilhasCri+"' ";html+="flightDataAdtMilCombo='"+valorComboMilhasAdt+"' ";html+="flightDataCriMilCombo='"+valorComboMilhasCri+"' ";html+="flightDataAdtEmp='"+valorEmpresaAdt+"' ";html+="flightDataCriEmp='"+valorEmpresaCri+"' ";html+="flightDataAdtEmpCombo='"+valorComboEmpresaAdt+"' ";html+="flightDataCriEmpCombo='"+valorComboEmpresaCri+"' ";html+="value='"+json_flight+"' disabled/>"}html+="</td>";html+="<td>";html+="<img src='"+e+r+"_ativo.png' class='choice-header' style='max-width: 46px !important;' alt=''>";html+="</td>";html+="<td style='white-space: normal; word-break: break-all !important;'>"+t[i]["Flight"]["number"]+"</td>";html+="<td>"+t[i]["Flight"]["stops"]+"</td>";html+="<td title='"+o[t[i]["Flight"]["from"]]["name"]+"'>"+t[i]["Flight"]["from"]+" "+partida+"</td>";html+="<td title='"+o[t[i]["Flight"]["to"]]["name"]+"'>"+t[i]["Flight"]["to"]+" "+chegada+"</td>";cssEmp="";if(totalDinheiro>totalEmpresa&&totalEmpresa>0)cssEmp="compensa";else if(totalComboDinheiro>totalComboEmpresa&&totalComboEmpresa>0)cssEmp="compensa";tdCia="<td>";tdMilhas="<td>";tdEmpresa="<td class='"+cssEmp+"' >";if(u["trip"]=="R"){if(s[r]["selling_mode"]=="2"){if(totalEmpresa>0||totalDinheiro>0||totalMilhas>0){if(u["children"]>0){if(valorEmpresaAdt==valorEmpresaCri&&valorDinheiroAdt==valorDinheiroCri&&valorMilhasAdt==valorMilhasCri){tdCia+="<div id='valorCia__"+n+"__"+r+"__"+i+"'>"+txtDinheiroAdt+"</div>";tdMilhas+="<div id='valorMil__"+n+"__"+r+"__"+i+"'>"+txtMilhasAdt+"</div>";tdEmpresa+="<div id='valorEmp__"+n+"__"+r+"__"+i+"'>"+txtEmpresaAdt+"</div>"}else{tdCia+="<div id='valorCia__"+n+"__"+r+"__"+i+"'><div>"+txtDinheiroAdt+" adt</div><div>"+txtDinheiroCri+" cri</div></div>";tdMilhas+="<div id='valorMil__"+n+"__"+r+"__"+i+"'><div>"+txtMilhasAdt+" adt</div><div>"+txtMilhasCri+" cri</div></div>";tdEmpresa+="<div id='valorEmp__"+n+"__"+r+"__"+i+"'><div>"+txtEmpresaAdt+" adt</div><div>"+txtEmpresaCri+" cri</div></div>"}}else{tdCia+="<div id='valorCia__"+n+"__"+r+"__"+i+"'>"+txtDinheiroAdt+"</div>";tdMilhas+="<div id='valorMil__"+n+"__"+r+"__"+i+"'>"+txtMilhasAdt+"</div>";tdEmpresa+="<div id='valorEmp__"+n+"__"+r+"__"+i+"'>"+txtEmpresaAdt+"</div>"}}if(totalComboEmpresa>0||totalComboDinheiro>0||totalComboMilhas>0){if(u["children"]>0){if(valorComboEmpresaAdt==valorComboEmpresaCri&&valorComboDinheiroAdt==valorComboDinheiroCri&&valorComboMilhasAdt==valorComboMilhasCri){tdCia+="<div id='valorComboCia__"+n+"__"+r+"__"+i+"'>"+txtComboDinheiroAdt+"</div>";tdMilhas+="<div id='valorComboMil__"+n+"__"+r+"__"+i+"'>"+txtComboMilhasAdt+"</div>";tdEmpresa+="<div id='valorComboEmp__"+n+"__"+r+"__"+i+"'>"+txtComboEmpresaAdt+"</div>"}else{tdCia+="<div id='valorComboCia__"+n+"__"+r+"__"+i+"'><div>"+txtComboDinheiroAdt+" adt</div><div>"+txtComboDinheiroCri+" cri</div></div>";tdMilhas+="<div id='valorComboMil__"+n+"__"+r+"__"+i+"'><div>"+txtComboMilhasAdt+" adt</div><div>"+txtComboMilhasCri+" cri</div></div>";tdEmpresa+="<div id='valorComboEmp__"+n+"__"+r+"__"+i+"'><div>"+txtComboEmpresaAdt+" adt</div><div>"+txtComboEmpresaCri+" cri</div></div>"}}else{tdCia+="<div id='valorComboCia__"+n+"__"+r+"__"+i+"'>"+txtComboDinheiroAdt+"</div>";tdMilhas+="<div id='valorComboMil__"+n+"__"+r+"__"+i+"'>"+txtComboMilhasAdt+"</div>";tdEmpresa+="<div id='valorComboEmp__"+n+"__"+r+"__"+i+"'>"+txtComboEmpresaAdt+"</div>"}}}else{if(u["children"]>0){if(valorEmpresaAdt==valorEmpresaCri&&valorDinheiroAdt==valorDinheiroCri&&valorMilhasAdt==valorMilhasCri){tdCia+="<div id='valorCia__"+n+"__"+r+"__"+i+"'>"+txtDinheiroAdt+"</div>";tdMilhas+="<div id='valorMil__"+n+"__"+r+"__"+i+"'>"+txtMilhasAdt+"</div>";tdEmpresa+="<div id='valorEmp__"+n+"__"+r+"__"+i+"'>"+txtEmpresaAdt+"</div>"}else{tdCia+="<div id='valorCia__"+n+"__"+r+"__"+i+"'><div>"+txtDinheiroAdt+" adt</div><div>"+txtDinheiroCri+" cri</div></div>";tdMilhas+="<div id='valorMil__"+n+"__"+r+"__"+i+"'><div>"+txtMilhasAdt+" adt</div><div>"+txtMilhasCri+" cri</div></div>";tdEmpresa+="<div id='valorEmp__"+n+"__"+r+"__"+i+"'><div>"+txtEmpresaAdt+" adt</div><div>"+txtEmpresaCri+" cri</div></div>"}}else{tdCia+="<div id='valorCia__"+n+"__"+r+"__"+i+"'>"+txtDinheiroAdt+"</div>";tdMilhas+="<div id='valorMil__"+n+"__"+r+"__"+i+"'>"+txtMilhasAdt+"</div>";tdEmpresa+="<div id='valorEmp__"+n+"__"+r+"__"+i+"'>"+txtEmpresaAdt+"</div>"}}}else{if(u["children"]>0){if(valorEmpresaAdt==valorEmpresaCri&&valorDinheiroAdt==valorDinheiroCri&&valorMilhasAdt==valorMilhasCri){tdCia+="<div id='valorCia__"+n+"__"+r+"__"+i+"'>"+txtDinheiroAdt+"</div>";tdMilhas+="<div id='valorMil__"+n+"__"+r+"__"+i+"'>"+txtMilhasAdt+"</div>";tdEmpresa+="<div id='valorEmp__"+n+"__"+r+"__"+i+"'>"+txtEmpresaAdt+"</div>"}else{tdCia+="<div id='valorCia__"+n+"__"+r+"__"+i+"'><div>"+txtDinheiroAdt+" adt</div><div>"+txtDinheiroCri+" cri</div></div>";tdMilhas+="<div id='valorMil__"+n+"__"+r+"__"+i+"'><div>"+txtMilhasAdt+" adt</div><div>"+txtMilhasCri+" cri</div></div>";tdEmpresa+="<div id='valorEmp__"+n+"__"+r+"__"+i+"'><div>"+txtEmpresaAdt+" adt</div><div>"+txtEmpresaCri+" cri</div></div>"}}else{tdCia+="<div id='valorCia__"+n+"__"+r+"__"+i+"'>"+txtDinheiroAdt+"</div>";tdMilhas+="<div id='valorMil__"+n+"__"+r+"__"+i+"'>"+txtMilhasAdt+"</div>";tdEmpresa+="<div id='valorEmp__"+n+"__"+r+"__"+i+"'>"+txtEmpresaAdt+"</div>"}}tdCia+="</td>";tdMilhas+="</td>";tdEmpresa+="</td>";html+=tdCia+tdMilhas+tdEmpresa;html+="<td>";html+="<div>";html+="<bottom id='btnCloseDetails__"+n+"__"+r+"__"+i+"' style='display: none;' onclick=\"ikarusWidgetJs.fecharDetalhes('"+n+"__"+r+"__"+i+"');\"><b>-</b></bottom>";html+="<bottom id='btnOpenDetails__"+n+"__"+r+"__"+i+"' onclick=\"ikarusWidgetJs.abrirDetalhes('"+n+"__"+r+"__"+i+"');\"><b>+</b></bottom>";html+="</div>";html+="</td>";html+="</tr>";html+="<tr style='display: none;' id='trDetails__"+n+"__"+r+"__"+i+"'>";html+="<td colspan='10' style='background-color: "+s[r]["color"]+";'>";html+="<div class='ikarus_widget_container-fluid'>";html+="<div class='ikarus_widget_row-fluid tituloDetalhesVoo'>";html+="Detalhes do Voo";html+="</div>";html+="<div class='ikarus_widget_row-fluid'>";html+="<div class='ikarus_widget_span12'>";html+="<table class='myCustomTable' align='center' width='100%' cellspacing='0' cellpadding='0' style='margin-bottom: 30px; background-color: #FFF;'>";html+="<tr style='background-color: #F3F3F3;'>";html+="<th style='text-align:center;'>A&eacute;rea</th>";html+="<th style='text-align:center;'>Aeronave</th>";html+="<th style='text-align:center;'>Sa&iacute;da</th>";html+="<th style='text-align:center;'>Chegada</th>";html+="</tr>";contColor=0;for(j=0;j<t[i]["Trip"].length;j++){partida=w(t[i]["Trip"][j]["departure"]);chegada=w(t[i]["Trip"][j]["arrival"]);html+="<tr>";html+="<td class='linhaDetalhesVoos"+j%2+"'>";html+="<b>"+t[i]["Trip"][j]["carrier"]+"</b>";html+="</td>";html+="<td class='linhaDetalhesVoos"+j%2+"'>";html+="<b>"+t[i]["Trip"][j]["number"]+"</b>";if(t[i]["Trip"][j]["airplane"]!=0&&t[i]["Trip"][j]["airplane"].length>3){html+="<BR>";html+=""+t[i]["Trip"][j]["airplane"]+""}html+="</td>";html+="<td class='linhaDetalhesVoos"+j%2+"'>";html+=""+o[t[i]["Trip"][j]["from"]]["name"]+"";html+=" ["+partida+"] ";html+="</td>";html+="<td class='linhaDetalhesVoos"+j%2+"'>";html+=""+o[t[i]["Trip"][j]["to"]]["name"]+"";html+=" ["+chegada+"] ";html+="</td>";html+="</tr>";contColor+=1}html+="<tr>";html+="<td colspan='4' class='linhaDetalhesVoos"+contColor%2+"'>";html+="Taxa da embarque/desembarque: "+taxaembarque;html+="</td>";html+="</tr>";html+="</table>";html+="</div>";html+="</div>";html+="</div>";html+="</td>";html+="</tr>"}}return html};var x=function(e,t,n){input=IkarusJQuery(e);operacao=input.prop("checked");hash=input.attr("hash");id=input.attr("id");id=id.replace("inputVoo__","");infos=id.split("__");trecho=infos[0];hash=infos[1];numero=infos[2];outroTrecho="";if(trecho=="ida")outroTrecho="volta";if(trecho=="volta")outroTrecho="ida";if(operacao){selected=IkarusJQuery('input[id*="inputVoo__'+id+'"]');voo=JSON.parse(selected.val());IkarusJQuery("#TransactionVoo"+trecho).val(selected.val());if(trecho=="ida")str="Ida";if(trecho=="volta")str="Volta";IkarusJQuery("#validaVoo"+str+"Tabela").attr("style","display: none;");d(trecho,id);totalDinheiro=parseFloat(voo["Flight"]["totalDinheiro"]);totalEmpresa=parseFloat(voo["Flight"]["totalEmpresa"]);totalComboDinheiro=parseFloat(voo["Flight"]["totalComboDinheiro"]);totalComboEmpresa=parseFloat(voo["Flight"]["totalComboEmpresa"]);usandoCombo=false;if(t["trip"]=="R"){selectedIda=IkarusJQuery('input[id*="inputVoo__ida"]:checked');selectedVolta=IkarusJQuery('input[id*="inputVoo__volta"]:checked');if(selectedIda.length>0&&selectedVolta.length>0){hashIda=selectedIda.attr("hash");hashVolta=selectedVolta.attr("hash");if(hashIda==hashVolta){if(n[hashIda]["selling_mode"]=="2"){if(totalComboEmpresa<totalEmpresa&&totalComboEmpresa>0){milhasA=parseInt(voo["Flight"]["miles_adults_combo"]);milhasC=parseInt(voo["Flight"]["miles_children_combo"]);h(id)}else{milhasA=parseInt(voo["Flight"]["miles_adults"]);milhasC=parseInt(voo["Flight"]["miles_children"]);l(id)}outro=IkarusJQuery('input[id*="inputVoo__'+outroTrecho+'"]:checked');idOutro=outro.attr("id");idOutro=idOutro.replace("inputVoo__","");outroVoo=JSON.parse(outro.val());totalDinheiro2=parseFloat(outroVoo["Flight"]["totalDinheiro"]);totalEmpresa2=parseFloat(outroVoo["Flight"]["totalEmpresa"]);totalComboDinheiro2=parseFloat(outroVoo["Flight"]["totalComboDinheiro"]);totalComboEmpresa2=parseFloat(outroVoo["Flight"]["totalComboEmpresa"]);if(totalComboEmpresa2<totalEmpresa2&&totalComboEmpresa2>0){milhasA2=parseInt(outroVoo["Flight"]["miles_adults_combo"]);milhasC2=parseInt(outroVoo["Flight"]["miles_children_combo"]);h(idOutro)}else{milhasA2=parseInt(outroVoo["Flight"]["miles_adults"]);milhasC2=parseInt(outroVoo["Flight"]["miles_children"]);l(idOutro)}usandoCombo=true}}}}if(!usandoCombo){milhasA=parseInt(voo["Flight"]["miles_adults"]);milhasC=parseInt(voo["Flight"]["miles_children"]);l(id);outro=IkarusJQuery('input[id*="inputVoo__'+outroTrecho+'"]:checked');if(outro.length>0){idOutro=outro.attr("id");idOutro=idOutro.replace("inputVoo__","");outroVoo=JSON.parse(outro.val());totalDinheiro2=parseFloat(outroVoo["Flight"]["totalDinheiro"]);totalEmpresa2=parseFloat(outroVoo["Flight"]["totalEmpresa"]);milhasA2=parseInt(outroVoo["Flight"]["miles_adults"]);milhasC2=parseInt(outroVoo["Flight"]["miles_children"]);l(idOutro)}}IkarusJQuery(window).scrollTop(IkarusJQuery("#tabela_"+trecho).offset())}else{IkarusJQuery("#TransactionVoo"+trecho).val("");v(trecho,id);if(trecho=="ida")str="Ida";else str="Volta";c();IkarusJQuery("#acompanhamento"+trecho).html('<div id="saldoacompanhamento'+trecho+'" value="0" style="text-align: center; background-color: #71C2E2; color: #FFF; font-weight: bold; font-size: 16px;">'+str+'</div><div style="text-align: center; color: #ADADAD;">nenhum voo selecionado</div>');outro=IkarusJQuery('input[id*="inputVoo__'+outroTrecho+'"]:checked');if(outro.length>0){outroVoo=JSON.parse(outro.val());totalDinheiro=parseFloat(outroVoo["Flight"]["totalDinheiro"]);totalEmpresa=parseFloat(outroVoo["Flight"]["totalEmpresa"]);milhasA=parseInt(outroVoo["Flight"]["miles_adults"]);milhasC=parseInt(outroVoo["Flight"]["miles_children"])}}};return{fillsearchForm:p,searchFlights:t,setAssetsUrl:n,buyRules:x,documentoMask:E,onChangeTrip:a,addDatepickers:r,abrirDetalhes:y,fecharDetalhes:b,validatePassengerForms:o,calculateAge:f}}()
